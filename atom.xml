<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>江东的笔记</title>
  
  <subtitle>Be overcome difficulties is victory</subtitle>
  <link href="https://du2279664786.github.io/atom.xml" rel="self"/>
  
  <link href="https://du2279664786.github.io/"/>
  <updated>2022-12-21T07:22:09.324Z</updated>
  <id>https://du2279664786.github.io/</id>
  
  <author>
    <name>江东</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>图像旋转</title>
    <link href="https://du2279664786.github.io/posts/a2382f00.html"/>
    <id>https://du2279664786.github.io/posts/a2382f00.html</id>
    <published>2022-12-21T14:55:10.000Z</published>
    <updated>2022-12-21T07:22:09.324Z</updated>
    
    <content type="html"><![CDATA[<p>图像旋转</p><span id="more"></span><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line"># 图像旋转变换主要调用getRotationMatrix2D()函数和warpAffine()函数实现，绕图像的中心旋转，函数原型如下：</span><br><span class="line"></span><br><span class="line"># M = cv2.getRotationMatrix2D(center, angle, scale)</span><br><span class="line"></span><br><span class="line">#– center表示旋转中心点，通常设置为(cols/2, rows/2)</span><br><span class="line"></span><br><span class="line">#– angle表示旋转角度，正值表示逆时针旋转，坐标原点被定为左上角</span><br><span class="line"></span><br><span class="line">#– scale表示比例因子</span><br><span class="line"></span><br><span class="line"># rotated = cv2.warpAffine(src, M, (cols, rows))</span><br><span class="line"></span><br><span class="line">#– src表示原始图像</span><br><span class="line"></span><br><span class="line">#– M表示旋转参数，即getRotationMatrix2D()函数定义的结果</span><br><span class="line"></span><br><span class="line">#– (cols, rows)表示原始图像的宽度和高度</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="comment"># By：Eastmount</span></span><br><span class="line"><span class="keyword">import</span> cv2  </span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np  </span><br><span class="line"> </span><br><span class="line"><span class="comment">#读取图片</span></span><br><span class="line">src = cv2.imread(<span class="string">&#x27;scenery.png&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#源图像的高、宽 以及通道数</span></span><br><span class="line">rows, cols, channel = src.shape</span><br><span class="line"></span><br><span class="line"><span class="comment">#绕图像的中心旋转</span></span><br><span class="line"><span class="comment">#函数参数：旋转中心 旋转度数 scale</span></span><br><span class="line">M = cv2.getRotationMatrix2D((cols/<span class="number">2</span>, rows/<span class="number">2</span>), <span class="number">30</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#函数参数：原始图像 旋转参数 元素图像宽高</span></span><br><span class="line">rotated = cv2.warpAffine(src, M, (cols, rows))  </span><br><span class="line"></span><br><span class="line"><span class="comment">#显示图像</span></span><br><span class="line">cv2.imshow(<span class="string">&quot;src&quot;</span>, src)</span><br><span class="line">cv2.imshow(<span class="string">&quot;rotated&quot;</span>, rotated)</span><br><span class="line"></span><br><span class="line"><span class="comment">#等待显示</span></span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;图像旋转&lt;/p&gt;</summary>
    
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/tags/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    <category term="期末考试" scheme="https://du2279664786.github.io/tags/%E6%9C%9F%E6%9C%AB%E8%80%83%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>图像缩放</title>
    <link href="https://du2279664786.github.io/posts/682f46ac.html"/>
    <id>https://du2279664786.github.io/posts/682f46ac.html</id>
    <published>2022-12-21T14:55:10.000Z</published>
    <updated>2022-12-21T06:50:41.664Z</updated>
    
    <content type="html"><![CDATA[<p>图像缩放</p><span id="more"></span><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#&#x27;&#x27;&#x27;– src表示原始图像</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#– dsize表示图像缩放的大小</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#– result表示图像结果</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#– fx表示图像x轴方向缩放大小的倍数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#– fy表示图像y轴方向缩放大小的倍数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#– interpolation表示变换方法。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># CV_INTER_NN表示最近邻插值；CV_INTER_LINEAR表示双线性插值（缺省使用）</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># CV_INTER_AREA表示使用像素关系重采样，当图像缩小时，该方法可以避免波纹出现，当图像放大时，类似于CV_INTER_NN；</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># CV_INTER_CUBIC表示立方插值&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">###  下面是Python实现图像缩放的代码，它将所读取的风景图像进行缩小。</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="comment"># By：Eastmount</span></span><br><span class="line"><span class="keyword">import</span> cv2  </span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np  </span><br><span class="line"> </span><br><span class="line"><span class="comment">#读取图片</span></span><br><span class="line">src = cv2.imread(<span class="string">&#x27;scenery.png&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#图像缩放</span></span><br><span class="line">result = cv2.resize(src, (<span class="number">200</span>,<span class="number">100</span>))</span><br><span class="line"><span class="built_in">print</span>(result.shape)</span><br><span class="line"></span><br><span class="line"><span class="comment">#显示图像</span></span><br><span class="line">cv2.imshow(<span class="string">&quot;original&quot;</span>, src)</span><br><span class="line">cv2.imshow(<span class="string">&quot;result&quot;</span>, result)</span><br><span class="line"></span><br><span class="line"><span class="comment">#等待显示</span></span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##  第二种  下面讲解另一种图像缩放变换的方法，通过原始图像像素乘以缩放系数进行图像变换，代码如下：</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="comment"># By：Eastmount</span></span><br><span class="line"><span class="keyword">import</span> cv2  </span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np  </span><br><span class="line"> </span><br><span class="line"><span class="comment">#读取图片</span></span><br><span class="line">src = cv2.imread(<span class="string">&#x27;scenery.png&#x27;</span>)</span><br><span class="line">rows, cols = src.shape[:<span class="number">2</span>]</span><br><span class="line"><span class="built_in">print</span>(rows, cols)</span><br><span class="line"></span><br><span class="line"><span class="comment">#图像缩放 dsize(列,行)</span></span><br><span class="line">result = cv2.resize(src, (<span class="built_in">int</span>(cols*<span class="number">0.6</span>), <span class="built_in">int</span>(rows*<span class="number">1.2</span>)))</span><br><span class="line"></span><br><span class="line"><span class="comment">#显示图像</span></span><br><span class="line">cv2.imshow(<span class="string">&quot;src&quot;</span>, src)</span><br><span class="line">cv2.imshow(<span class="string">&quot;result&quot;</span>, result)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##   最后讲解调用(fx,fy)参数设置缩放倍数的方法，对原始图像进行放大或缩小操作。</span></span><br><span class="line"><span class="comment">#    下面代码是fx和fy方向缩小至原始图像0.3倍的操作。</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="comment"># By：Eastmount</span></span><br><span class="line"><span class="keyword">import</span> cv2  </span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np  </span><br><span class="line"> </span><br><span class="line"><span class="comment">#读取图片</span></span><br><span class="line">src = cv2.imread(<span class="string">&#x27;scenery.png&#x27;</span>)</span><br><span class="line">rows, cols = src.shape[:<span class="number">2</span>]</span><br><span class="line"><span class="built_in">print</span>(rows, cols)</span><br><span class="line"></span><br><span class="line"><span class="comment">#图像缩放</span></span><br><span class="line">result = cv2.resize(src, <span class="literal">None</span>, fx=<span class="number">0.3</span>, fy=<span class="number">0.3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#显示图像</span></span><br><span class="line">cv2.imshow(<span class="string">&quot;src&quot;</span>, src)</span><br><span class="line">cv2.imshow(<span class="string">&quot;result&quot;</span>, result)</span><br><span class="line"></span><br><span class="line"><span class="comment">#等待显示</span></span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;图像缩放&lt;/p&gt;</summary>
    
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/tags/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    <category term="期末考试" scheme="https://du2279664786.github.io/tags/%E6%9C%9F%E6%9C%AB%E8%80%83%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>图像平移</title>
    <link href="https://du2279664786.github.io/posts/576024a4.html"/>
    <id>https://du2279664786.github.io/posts/576024a4.html</id>
    <published>2022-12-21T14:55:10.000Z</published>
    <updated>2022-12-21T06:49:18.865Z</updated>
    
    <content type="html"><![CDATA[<p>图像平移</p><span id="more"></span><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#– src表示原始图像</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#– M表示平移矩阵</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#– dsize表示变换后的输出图像的尺寸大小</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#– dst为输出图像，其大小为dsize，类型与src相同</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#– flag表示插值方法的组合和可选值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#– borderValue表示像素外推法，当borderMode = BORDER_TRANSPARENT时，表示目标图像中的像素不会修改源图像中的“异常值”。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#– borderValue用于边界不变的情况，默认情况下为0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#下面代码是图像平移的一个简单案例，它定义了图像平移矩阵M，然后调用warpAffine()函数将原始图像垂直向下平移了50个像素，水平向右平移了100个像素。</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="comment"># By：Eastmount</span></span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment">#读取图片</span></span><br><span class="line">src = cv2.imread(<span class="string">&#x27;scenery.png&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#图像平移矩阵</span></span><br><span class="line">M = np.float32([[<span class="number">1</span>, <span class="number">0</span>, <span class="number">100</span>], [<span class="number">0</span>, <span class="number">1</span>, <span class="number">50</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment">#获取原始图像列数和行数</span></span><br><span class="line">rows, cols = src.shape[:<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">#图像平移</span></span><br><span class="line">result = cv2.warpAffine(src, M, (cols, rows)) </span><br><span class="line"></span><br><span class="line"><span class="comment">#显示图像</span></span><br><span class="line">cv2.imshow(<span class="string">&quot;original&quot;</span>, src)</span><br><span class="line">cv2.imshow(<span class="string">&quot;result&quot;</span>, result)</span><br><span class="line"></span><br><span class="line"><span class="comment">#等待显示</span></span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#  下面一个案例是将图像分别向下、向上、向右、向左平移，再调用matplotlib绘图库依次绘制的过程。</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="comment"># By：Eastmount</span></span><br><span class="line"><span class="keyword">import</span> cv2  </span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"> </span><br><span class="line"><span class="comment">#读取图片</span></span><br><span class="line">img = cv2.imread(<span class="string">&#x27;scenery.png&#x27;</span>)</span><br><span class="line">image = cv2.cvtColor(img,cv2.COLOR_BGR2RGB)</span><br><span class="line"></span><br><span class="line"><span class="comment">#图像平移</span></span><br><span class="line"><span class="comment">#垂直方向 向下平移100</span></span><br><span class="line">M = np.float32([[<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">1</span>, <span class="number">100</span>]])</span><br><span class="line">img1 = cv2.warpAffine(image, M, (image.shape[<span class="number">1</span>], image.shape[<span class="number">0</span>]))</span><br><span class="line"></span><br><span class="line"><span class="comment">#垂直方向 向上平移100</span></span><br><span class="line">M = np.float32([[<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">1</span>, -<span class="number">100</span>]])</span><br><span class="line">img2 = cv2.warpAffine(image, M, (image.shape[<span class="number">1</span>], image.shape[<span class="number">0</span>]))</span><br><span class="line"></span><br><span class="line"><span class="comment">#水平方向 向右平移100</span></span><br><span class="line">M = np.float32([[<span class="number">1</span>, <span class="number">0</span>, <span class="number">100</span>], [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>]])</span><br><span class="line">img3 = cv2.warpAffine(image, M, (image.shape[<span class="number">1</span>], image.shape[<span class="number">0</span>]))</span><br><span class="line"></span><br><span class="line"><span class="comment">#水平方向 向左平移100</span></span><br><span class="line">M = np.float32([[<span class="number">1</span>, <span class="number">0</span>, -<span class="number">100</span>], [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>]])</span><br><span class="line">img4 = cv2.warpAffine(image, M, (image.shape[<span class="number">1</span>], image.shape[<span class="number">0</span>]))</span><br><span class="line"></span><br><span class="line"><span class="comment">#循环显示图形</span></span><br><span class="line">titles = [ <span class="string">&#x27;Image1&#x27;</span>, <span class="string">&#x27;Image2&#x27;</span>, <span class="string">&#x27;Image3&#x27;</span>, <span class="string">&#x27;Image4&#x27;</span>]  </span><br><span class="line">images = [img1, img2, img3, img4]  </span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">4</span>):  </span><br><span class="line">   plt.subplot(<span class="number">2</span>,<span class="number">2</span>,i+<span class="number">1</span>), plt.imshow(images[i], <span class="string">&#x27;gray&#x27;</span>)  </span><br><span class="line">   plt.title(titles[i])  </span><br><span class="line">   plt.xticks([]),plt.yticks([])  </span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;图像平移&lt;/p&gt;</summary>
    
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/tags/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    <category term="期末考试" scheme="https://du2279664786.github.io/tags/%E6%9C%9F%E6%9C%AB%E8%80%83%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>Python实现图片查找轮廓、多边形拟合、最小外接矩形代码</title>
    <link href="https://du2279664786.github.io/posts/c8c608af.html"/>
    <id>https://du2279664786.github.io/posts/c8c608af.html</id>
    <published>2022-12-21T14:55:10.000Z</published>
    <updated>2022-12-21T07:23:45.721Z</updated>
    
    <content type="html"><![CDATA[<p>Python实现图片查找轮廓、多边形拟合、最小外接矩形代码</p><span id="more"></span><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">&#x27;/home/yasin/coffe.jpg&#x27;</span>)</span><br><span class="line">img_gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)</span><br><span class="line"></span><br><span class="line">_, contours, hierarchy = cv2.findContours(img_gray, cv2.RETR_TREE, cv2.CHAIN_APPROX_SIMPLE)</span><br><span class="line"></span><br><span class="line">cv2.drawContours(img, contours, -<span class="number">1</span>, (<span class="number">255</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">1</span>)</span><br><span class="line">cv2.namedWindow(<span class="string">&#x27;Result of drawContours&#x27;</span>, <span class="number">0</span>)</span><br><span class="line">cv2.imshow(<span class="string">&#x27;Result of drawContours&#x27;</span>, img)</span><br><span class="line">cv2.waitKey()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cnt = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(contours)):</span><br><span class="line">    arclen = cv2.arcLength(contours[i], <span class="literal">True</span>)</span><br><span class="line">    epsilon = <span class="built_in">max</span>(<span class="number">3</span>, <span class="built_in">int</span>(arclen * <span class="number">0.02</span>))   <span class="comment"># 拟合出的多边形与原轮廓最大距离，可以自己设置，这里根据轮廓周长动态设置</span></span><br><span class="line">    approx = cv2.approxPolyDP(contours[i], epsilon, <span class="literal">False</span>) <span class="comment"># 轮廓的多边形拟合</span></span><br><span class="line">    area = cv2.contourArea(contours[i])     <span class="comment"># 计算面积</span></span><br><span class="line">    rect = cv2.minAreaRect(contours[i])</span><br><span class="line">    box = np.int0(cv2.boxPoints(rect))      <span class="comment"># 计算最小外接矩形顶点</span></span><br><span class="line">    h = <span class="built_in">int</span>(rect[<span class="number">1</span>][<span class="number">0</span>])</span><br><span class="line">    w = <span class="built_in">int</span>(rect[<span class="number">1</span>][<span class="number">1</span>])</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">min</span>(h, w) == <span class="number">0</span>:</span><br><span class="line">        ration = <span class="number">0</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        ration = <span class="built_in">max</span>(h,w) /<span class="built_in">min</span>(h,w)   <span class="comment"># 长宽比</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 对长宽比，轮廓面积，拟合出的多边形顶点数做筛选</span></span><br><span class="line">    <span class="keyword">if</span> ration &lt; <span class="number">10</span> <span class="keyword">and</span> area &gt; <span class="number">20</span> <span class="keyword">and</span> area &lt; <span class="number">4000</span> <span class="keyword">and</span> approx.shape[<span class="number">0</span>] &gt; <span class="number">3</span> :</span><br><span class="line">        <span class="comment"># 对满足条件的轮廓画出轮廓的拟合多边形</span></span><br><span class="line">        cv2.polylines(img, [approx], <span class="literal">True</span>, (<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">cv2.namedWindow(<span class="string">&#x27;Result of filtered&#x27;</span>, <span class="number">0</span>)</span><br><span class="line">cv2.imshow(<span class="string">&#x27;Result of filtered&#x27;</span>, img)</span><br><span class="line">cv2.waitKey()</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;Python实现图片查找轮廓、多边形拟合、最小外接矩形代码&lt;/p&gt;</summary>
    
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/tags/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    <category term="期末考试" scheme="https://du2279664786.github.io/tags/%E6%9C%9F%E6%9C%AB%E8%80%83%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>OpenCV实现相机标定</title>
    <link href="https://du2279664786.github.io/posts/bbb91615.html"/>
    <id>https://du2279664786.github.io/posts/bbb91615.html</id>
    <published>2022-12-21T14:55:10.000Z</published>
    <updated>2022-12-21T07:23:34.716Z</updated>
    
    <content type="html"><![CDATA[<p>OpenCV实现相机标定</p><span id="more"></span><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> glob</span><br><span class="line"></span><br><span class="line"><span class="comment"># 找棋盘格角点</span></span><br><span class="line"><span class="comment"># 阈值</span></span><br><span class="line">criteria = (cv2.TERM_CRITERIA_EPS + cv2.TERM_CRITERIA_MAX_ITER, <span class="number">30</span>, <span class="number">0.001</span>)</span><br><span class="line"><span class="comment">#棋盘格模板规格</span></span><br><span class="line">w = <span class="number">7</span>   <span class="comment">#内角点个数，内角点是和其他格子连着的点</span></span><br><span class="line">h = <span class="number">7</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 世界坐标系中的棋盘格点,例如(0,0,0), (1,0,0), (2,0,0) ....,(8,5,0)，去掉Z坐标，记为二维矩阵</span></span><br><span class="line">objp = np.zeros((w*h,<span class="number">3</span>), np.float32)</span><br><span class="line">objp[:,:<span class="number">2</span>] = np.mgrid[<span class="number">0</span>:w,<span class="number">0</span>:h].T.reshape(-<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"><span class="comment"># 储存棋盘格角点的世界坐标和图像坐标对</span></span><br><span class="line">objpoints = [] <span class="comment"># 在世界坐标系中的三维点</span></span><br><span class="line">imgpoints = [] <span class="comment"># 在图像平面的二维点</span></span><br><span class="line"></span><br><span class="line">images = glob.glob(<span class="string">&#x27;picture/*.jpg&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> fname <span class="keyword">in</span> images:</span><br><span class="line">    img = cv2.imread(fname)</span><br><span class="line">    gray = cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)</span><br><span class="line">    <span class="comment"># 找到棋盘格角点</span></span><br><span class="line">    <span class="comment"># 棋盘图像(8位灰度或彩色图像)  棋盘尺寸  存放角点的位置</span></span><br><span class="line">    ret, corners = cv2.findChessboardCorners(gray, (w,h),<span class="literal">None</span>)</span><br><span class="line">    <span class="comment"># 如果找到足够点对，将其存储起来</span></span><br><span class="line">    <span class="keyword">if</span> ret == <span class="literal">True</span>:</span><br><span class="line">        <span class="comment"># 角点精确检测</span></span><br><span class="line">        <span class="comment"># 输入图像 角点初始坐标 搜索窗口为2*winsize+1 死区 求角点的迭代终止条件</span></span><br><span class="line">        cv2.cornerSubPix(gray,corners,(<span class="number">11</span>,<span class="number">11</span>),(-<span class="number">1</span>,-<span class="number">1</span>),criteria)</span><br><span class="line">        objpoints.append(objp)</span><br><span class="line">        imgpoints.append(corners)</span><br><span class="line">        <span class="comment"># 将角点在图像上显示</span></span><br><span class="line">        cv2.drawChessboardCorners(img, (w,h), corners, ret)</span><br><span class="line">        cv2.imshow(<span class="string">&#x27;findCorners&#x27;</span>,img)</span><br><span class="line">        cv2.waitKey(<span class="number">1000</span>)</span><br><span class="line">cv2.destroyAllWindows()</span><br><span class="line"><span class="comment">#标定、去畸变</span></span><br><span class="line"><span class="comment"># 输入：世界坐标系里的位置 像素坐标 图像的像素尺寸大小 3*3矩阵，相机内参数矩阵 畸变矩阵</span></span><br><span class="line"><span class="comment"># 输出：标定结果 相机的内参数矩阵 畸变系数 旋转矩阵 平移向量</span></span><br><span class="line">ret, mtx, dist, rvecs, tvecs = cv2.calibrateCamera(objpoints, imgpoints, gray.shape[::-<span class="number">1</span>], <span class="literal">None</span>, <span class="literal">None</span>)</span><br><span class="line"><span class="comment"># mtx：内参数矩阵</span></span><br><span class="line"><span class="comment"># dist：畸变系数</span></span><br><span class="line"><span class="comment"># rvecs：旋转向量 （外参数）</span></span><br><span class="line"><span class="comment"># tvecs ：平移向量 （外参数）</span></span><br><span class="line"><span class="built_in">print</span> ((<span class="string">&quot;ret:&quot;</span>),ret)</span><br><span class="line"><span class="built_in">print</span> ((<span class="string">&quot;mtx:\n&quot;</span>),mtx)        <span class="comment"># 内参数矩阵</span></span><br><span class="line"><span class="built_in">print</span> ((<span class="string">&quot;dist:\n&quot;</span>),dist)      <span class="comment"># 畸变系数   distortion cofficients = (k_1,k_2,p_1,p_2,k_3)</span></span><br><span class="line"><span class="built_in">print</span> ((<span class="string">&quot;rvecs:\n&quot;</span>),rvecs)    <span class="comment"># 旋转向量  # 外参数</span></span><br><span class="line"><span class="built_in">print</span> ((<span class="string">&quot;tvecs:\n&quot;</span>),tvecs)    <span class="comment"># 平移向量  # 外参数</span></span><br><span class="line"><span class="comment"># 去畸变</span></span><br><span class="line">img2 = cv2.imread(<span class="string">&#x27;picture/6.jpg&#x27;</span>)</span><br><span class="line">h,w = img2.shape[:<span class="number">2</span>]</span><br><span class="line"><span class="comment"># 我们已经得到了相机内参和畸变系数，在将图像去畸变之前，</span></span><br><span class="line"><span class="comment"># 我们还可以使用cv.getOptimalNewCameraMatrix()优化内参数和畸变系数，</span></span><br><span class="line"><span class="comment"># 通过设定自由自由比例因子alpha。当alpha设为0的时候，</span></span><br><span class="line"><span class="comment"># 将会返回一个剪裁过的将去畸变后不想要的像素去掉的内参数和畸变系数；</span></span><br><span class="line"><span class="comment"># 当alpha设为1的时候，将会返回一个包含额外黑色像素点的内参数和畸变系数，并返回一个ROI用于将其剪裁掉</span></span><br><span class="line">newcameramtx, roi=cv2.getOptimalNewCameraMatrix(mtx,dist,(w,h),<span class="number">0</span>,(w,h)) <span class="comment"># 自由比例参数</span></span><br><span class="line"></span><br><span class="line">dst = cv2.undistort(img2, mtx, dist, <span class="literal">None</span>, newcameramtx)</span><br><span class="line"><span class="comment"># 根据前面ROI区域裁剪图片</span></span><br><span class="line">x,y,w,h = roi</span><br><span class="line">dst = dst[y:y+h, x:x+w]</span><br><span class="line">cv2.imwrite(<span class="string">&#x27;calibresult.jpg&#x27;</span>,dst)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 反投影误差</span></span><br><span class="line"><span class="comment"># 通过反投影误差，我们可以来评估结果的好坏。越接近0，说明结果越理想。</span></span><br><span class="line"><span class="comment"># 通过之前计算的内参数矩阵、畸变系数、旋转矩阵和平移向量，使用cv2.projectPoints()计算三维点到二维图像的投影，</span></span><br><span class="line"><span class="comment"># 然后计算反投影得到的点与图像上检测到的点的误差，最后计算一个对于所有标定图像的平均误差，这个值就是反投影误差。</span></span><br><span class="line">total_error = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(objpoints)):</span><br><span class="line">    imgpoints2, _ = cv2.projectPoints(objpoints[i], rvecs[i], tvecs[i], mtx, dist)</span><br><span class="line">    error = cv2.norm(imgpoints[i],imgpoints2, cv2.NORM_L2)/<span class="built_in">len</span>(imgpoints2)</span><br><span class="line">    total_error += error</span><br><span class="line"><span class="built_in">print</span> ((<span class="string">&quot;total error: &quot;</span>), total_error/<span class="built_in">len</span>(objpoints))</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;OpenCV实现相机标定&lt;/p&gt;</summary>
    
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/tags/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    <category term="期末考试" scheme="https://du2279664786.github.io/tags/%E6%9C%9F%E6%9C%AB%E8%80%83%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>中值滤波</title>
    <link href="https://du2279664786.github.io/posts/72bb5890.html"/>
    <id>https://du2279664786.github.io/posts/72bb5890.html</id>
    <published>2022-12-21T14:55:10.000Z</published>
    <updated>2022-12-21T07:24:14.029Z</updated>
    
    <content type="html"><![CDATA[<p>中值滤波</p><span id="more"></span><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#encoding:utf-8</span></span><br><span class="line"><span class="keyword">import</span> cv2  </span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np  </span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment">#读取图片</span></span><br><span class="line">img = cv2.imread(<span class="string">&#x27;test01.png&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#高斯滤波</span></span><br><span class="line">result = cv2.medianBlur(img, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#显示图像</span></span><br><span class="line">cv2.imshow(<span class="string">&quot;source img&quot;</span>, img)</span><br><span class="line">cv2.imshow(<span class="string">&quot;medianBlur&quot;</span>, result)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#等待显示</span></span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;中值滤波&lt;/p&gt;</summary>
    
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/tags/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    <category term="期末考试" scheme="https://du2279664786.github.io/tags/%E6%9C%9F%E6%9C%AB%E8%80%83%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>opencv+pythons相机标定源码解析</title>
    <link href="https://du2279664786.github.io/posts/5ebdf2fb.html"/>
    <id>https://du2279664786.github.io/posts/5ebdf2fb.html</id>
    <published>2022-12-21T14:55:10.000Z</published>
    <updated>2022-12-21T07:22:19.562Z</updated>
    
    <content type="html"><![CDATA[<p>opencv+pythons相机标定源码解析</p><span id="more"></span><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> glob</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 设置寻找亚像素角点的参数，采用的停止准则是最大循环次数30和最大误差容限0.001</span></span><br><span class="line">criteria = (cv2.TERM_CRITERIA_MAX_ITER | cv2.TERM_CRITERIA_EPS, <span class="number">30</span>, <span class="number">0.001</span>)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 获取标定板角点的位置</span></span><br><span class="line">objp = np.zeros((<span class="number">5</span> * <span class="number">7</span>, <span class="number">3</span>), np.float32) <span class="comment">## 仅算内角点，注意内角点即不靠近边界的角点</span></span><br><span class="line">objp[:, :<span class="number">2</span>] = np.mgrid[<span class="number">0</span>:<span class="number">7</span>, <span class="number">0</span>:<span class="number">5</span>].T.reshape(-<span class="number">1</span>, <span class="number">2</span>)  <span class="comment"># 将世界坐标系建在标定板上，所有点的Z坐标全部为0，所以只需要赋值x和y 5行7列reshape成（35,2），即真实的坐标（0,0），（1,0）...</span></span><br><span class="line">a = np.mgrid[<span class="number">0</span>:<span class="number">7</span>, <span class="number">0</span>:<span class="number">5</span>].T</span><br><span class="line">b = np.mgrid[<span class="number">0</span>:<span class="number">7</span>, <span class="number">0</span>:<span class="number">5</span>]</span><br><span class="line"><span class="built_in">print</span>(a, a.shape) <span class="comment">#（5,7,2）</span></span><br><span class="line"><span class="built_in">print</span>(b, b.shape) <span class="comment">#（2,7,5）</span></span><br><span class="line"><span class="comment">#exit()</span></span><br><span class="line">obj_points = []  <span class="comment"># 存储3D点</span></span><br><span class="line">img_points = []  <span class="comment"># 存储2D点</span></span><br><span class="line"> </span><br><span class="line">images = glob.glob(<span class="string">&quot;./picture/*.jpg&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> fname <span class="keyword">in</span> images:</span><br><span class="line">    img = cv2.imread(fname)</span><br><span class="line">    <span class="built_in">print</span>(fname)</span><br><span class="line">    <span class="comment">#h, w, _ = img.shape</span></span><br><span class="line">    img = cv2.resize(img, (<span class="number">600</span>, <span class="number">600</span>))</span><br><span class="line">    <span class="comment">#print(img)</span></span><br><span class="line"> </span><br><span class="line">    cv2.waitKey(<span class="number">15</span>)</span><br><span class="line">    gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)</span><br><span class="line">    <span class="comment">#cv2.imshow(&#x27;img&#x27;, gray)</span></span><br><span class="line">    size = gray.shape[::-<span class="number">1</span>]</span><br><span class="line">    ret, corners = cv2.findChessboardCorners(gray, (<span class="number">7</span>, <span class="number">5</span>), <span class="literal">None</span>) <span class="comment"># 寻找真实世界角点坐标在照片中的像素坐标，(这里的7和5，表示Number of inner corners per a chessboard row and column，一定注意，不是7行5列，有些博客的介绍是错误的)</span></span><br><span class="line">    <span class="built_in">print</span>(corners.shape)</span><br><span class="line">    <span class="built_in">print</span>(ret)</span><br><span class="line">    exit()</span><br><span class="line">    <span class="keyword">if</span> ret:</span><br><span class="line"> </span><br><span class="line">        obj_points.append(objp)</span><br><span class="line"> </span><br><span class="line">        corners2 = cv2.cornerSubPix(gray, corners, (<span class="number">5</span>, <span class="number">5</span>), (-<span class="number">1</span>, -<span class="number">1</span>), criteria)  <span class="comment"># 在原角点的基础上寻找亚像素角点，即精确到小数</span></span><br><span class="line">        <span class="comment">#print(corners2)</span></span><br><span class="line">        <span class="keyword">if</span> [corners2]:</span><br><span class="line">            img_points.append(corners2)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            img_points.append(corners)</span><br><span class="line"> </span><br><span class="line">        cv2.drawChessboardCorners(img, (<span class="number">7</span>, <span class="number">5</span>), corners, ret)  <span class="comment">#绘制角点</span></span><br><span class="line">        cv2.imshow(<span class="string">&#x27;img&#x27;</span>, img)</span><br><span class="line">        cv2.waitKey(<span class="number">2000</span>)</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(img_points))</span><br><span class="line">cv2.destroyAllWindows()</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 标定</span></span><br><span class="line">ret, mtx, dist, rvecs, tvecs = cv2.calibrateCamera(obj_points, img_points, size, <span class="literal">None</span>, <span class="literal">None</span>)</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;ret:&quot;</span>, ret)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;mtx:\n&quot;</span>, mtx) <span class="comment"># 内参数矩阵</span></span><br><span class="line"><span class="comment">#print(&quot;dist:\n&quot;, dist)  # 畸变系数</span></span><br><span class="line"><span class="comment">#print(&quot;rvecs:\n&quot;, rvecs)  # 旋转向量 </span></span><br><span class="line"><span class="comment">#print(&quot;tvecs:\n&quot;, tvecs ) # 平移向量</span></span><br><span class="line"> </span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;opencv+pythons相机标定源码解析&lt;/p&gt;</summary>
    
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/tags/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    <category term="期末考试" scheme="https://du2279664786.github.io/tags/%E6%9C%9F%E6%9C%AB%E8%80%83%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>均值滤波</title>
    <link href="https://du2279664786.github.io/posts/46aaa473.html"/>
    <id>https://du2279664786.github.io/posts/46aaa473.html</id>
    <published>2022-12-21T14:55:10.000Z</published>
    <updated>2022-12-21T07:25:53.393Z</updated>
    
    <content type="html"><![CDATA[<p>均值滤波</p><span id="more"></span><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#encoding:utf-8</span></span><br><span class="line"><span class="keyword">import</span> cv2  </span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np  </span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment">#读取图片</span></span><br><span class="line">img = cv2.imread(<span class="string">&#x27;test01.png&#x27;</span>)</span><br><span class="line">source = cv2.cvtColor(img,cv2.COLOR_BGR2RGB)</span><br><span class="line"></span><br><span class="line"><span class="comment">#均值滤波</span></span><br><span class="line">result = cv2.blur(source, (<span class="number">5</span>,<span class="number">5</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#显示图形</span></span><br><span class="line">titles = [<span class="string">&#x27;Source Image&#x27;</span>, <span class="string">&#x27;Blur Image&#x27;</span>]  </span><br><span class="line">images = [source, result]  </span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> xrange(<span class="number">2</span>):  </span><br><span class="line">   plt.subplot(<span class="number">1</span>,<span class="number">2</span>,i+<span class="number">1</span>), plt.imshow(images[i], <span class="string">&#x27;gray&#x27;</span>)  </span><br><span class="line">   plt.title(titles[i])  </span><br><span class="line">   plt.xticks([]),plt.yticks([])  </span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;均值滤波&lt;/p&gt;</summary>
    
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/tags/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    <category term="期末考试" scheme="https://du2279664786.github.io/tags/%E6%9C%9F%E6%9C%AB%E8%80%83%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>图像增加噪声的代码</title>
    <link href="https://du2279664786.github.io/posts/95e1962a.html"/>
    <id>https://du2279664786.github.io/posts/95e1962a.html</id>
    <published>2022-12-21T14:55:10.000Z</published>
    <updated>2022-12-21T07:25:09.345Z</updated>
    
    <content type="html"><![CDATA[<p>图像增加噪声的代码</p><span id="more"></span><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#读取图片</span></span><br><span class="line">img = cv2.imread(<span class="string">&quot;test.jpg&quot;</span>, cv2.IMREAD_UNCHANGED)</span><br><span class="line">rows, cols, chn = img.shape</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#加噪声</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5000</span>):    </span><br><span class="line">    x = np.random.randint(<span class="number">0</span>, rows) </span><br><span class="line">    y = np.random.randint(<span class="number">0</span>, cols)    </span><br><span class="line">    img[x,y,:] = <span class="number">255</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cv2.imshow(<span class="string">&quot;noise&quot;</span>, img)</span><br><span class="line"></span><br><span class="line"><span class="comment">#等待显示</span></span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;图像增加噪声的代码&lt;/p&gt;</summary>
    
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/tags/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    <category term="期末考试" scheme="https://du2279664786.github.io/tags/%E6%9C%9F%E6%9C%AB%E8%80%83%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>增强对比度</title>
    <link href="https://du2279664786.github.io/posts/8db3b8ea.html"/>
    <id>https://du2279664786.github.io/posts/8db3b8ea.html</id>
    <published>2022-12-21T14:55:10.000Z</published>
    <updated>2022-12-21T07:27:14.911Z</updated>
    
    <content type="html"><![CDATA[<p>增强对比度</p><span id="more"></span><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">对比度增强</span><br><span class="line"></span><br><span class="line">cv2.calcHist(images, channels, mask, histSize, ranges[, hist[, accumulate ]])  <span class="comment">#图像直方图</span></span><br><span class="line"></span><br><span class="line">cv2.normalize(src[, dst[, alpha[, beta[, norm_type[, dtype[, mask]]]]]]) → dst   <span class="comment">#直方图归一化</span></span><br><span class="line"></span><br><span class="line">cv2.equalizeHist(image)   <span class="comment">#直方图均衡化</span></span><br><span class="line"></span><br><span class="line">cv2.createCLAHE(clipLimit, tileGridSize)<span class="comment">#创建clahe对象，限制对比度</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#(1)灰度直方图</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#代码实现：</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#灰度直方图</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment">#定义caleGrayHist函数来计算灰度直方图</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">caleGrayHist</span>(<span class="params">image</span>):</span><br><span class="line"></span><br><span class="line"><span class="comment">#灰度图像的高、宽</span></span><br><span class="line"></span><br><span class="line">rows, cols = image.shape</span><br><span class="line"></span><br><span class="line"><span class="comment">#存储灰度直方图</span></span><br><span class="line"></span><br><span class="line">grayHist = np.zeros([<span class="number">256</span>], np.uint64) <span class="comment">#图像的灰度级范围是0~255</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> r <span class="keyword">in</span> <span class="built_in">range</span>(rows):</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> c <span class="keyword">in</span> <span class="built_in">range</span>(cols):</span><br><span class="line"></span><br><span class="line">grayHist[image[r][c]] +=<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> grayHist</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">r&#x27;C:\Users\x\Desktop\2.jpg&#x27;</span>, cv2.IMREAD_GRAYSCALE)</span><br><span class="line"></span><br><span class="line"><span class="comment">#计算灰度直方图</span></span><br><span class="line"></span><br><span class="line">grayHist = caleGrayHist(img)</span><br><span class="line"></span><br><span class="line"><span class="comment">#画出直方图</span></span><br><span class="line"></span><br><span class="line">x_range = <span class="built_in">range</span>(<span class="number">256</span>)</span><br><span class="line"></span><br><span class="line">plt.plot(x_range, grayHist, <span class="string">&#x27;r&#x27;</span>, linewidth=<span class="number">1.5</span>, c=<span class="string">&#x27;orange&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置坐标轴的范围</span></span><br><span class="line"></span><br><span class="line">y_maxValue = np.<span class="built_in">max</span>(grayHist)</span><br><span class="line"></span><br><span class="line">plt.axis([<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>, y_maxValue]) <span class="comment">#画图范围</span></span><br><span class="line"></span><br><span class="line">plt.xlabel(<span class="string">&quot;gray Level&quot;</span>)</span><br><span class="line"></span><br><span class="line">plt.ylabel(<span class="string">&quot;number of pixels&quot;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;增强对比度&lt;/p&gt;</summary>
    
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/tags/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    <category term="期末考试" scheme="https://du2279664786.github.io/tags/%E6%9C%9F%E6%9C%AB%E8%80%83%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>小波变换</title>
    <link href="https://du2279664786.github.io/posts/34569913.html"/>
    <id>https://du2279664786.github.io/posts/34569913.html</id>
    <published>2022-12-21T14:55:10.000Z</published>
    <updated>2022-12-21T07:28:08.000Z</updated>
    
    <content type="html"><![CDATA[<p>小波变换</p><span id="more"></span><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pywt</span><br><span class="line"><span class="keyword">from</span> matplotlib.font_manager <span class="keyword">import</span> FontProperties</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sampling_rate = <span class="number">1024</span></span><br><span class="line">t = np.arange(<span class="number">0</span>, <span class="number">1.0</span>, <span class="number">1.0</span> / sampling_rate)</span><br><span class="line">f1 = <span class="number">100</span></span><br><span class="line">f2 = <span class="number">200</span></span><br><span class="line">f3 = <span class="number">300</span></span><br><span class="line">data = np.piecewise(t, [t &lt; <span class="number">1</span>, t &lt; <span class="number">0.8</span>, t &lt; <span class="number">0.3</span>],</span><br><span class="line">                    [<span class="keyword">lambda</span> t: np.sin(<span class="number">2</span> * np.pi * f1 * t), <span class="keyword">lambda</span> t: np.sin(<span class="number">2</span> * np.pi * f2 * t),</span><br><span class="line">                     <span class="keyword">lambda</span> t: np.sin(<span class="number">2</span> * np.pi * f3 * t)])</span><br><span class="line">wavename = <span class="string">&#x27;cgau8&#x27;</span></span><br><span class="line">totalscal = <span class="number">256</span></span><br><span class="line">fc = pywt.central_frequency(wavename)</span><br><span class="line">cparam = <span class="number">2</span> * fc * totalscal</span><br><span class="line">scales = cparam / np.arange(totalscal, <span class="number">1</span>, -<span class="number">1</span>)</span><br><span class="line">[cwtmatr, frequencies] = pywt.cwt(data, scales, wavename, <span class="number">1.0</span> / sampling_rate)</span><br><span class="line">plt.figure(figsize=(<span class="number">8</span>, <span class="number">4</span>))</span><br><span class="line">plt.subplot(<span class="number">211</span>)</span><br><span class="line">plt.plot(t, data)</span><br><span class="line">plt.xlabel(<span class="string">u&quot;time(s)&quot;</span>)</span><br><span class="line">plt.title(<span class="string">u&quot;300Hz 200Hz 100Hz Time spectrum&quot;</span>)</span><br><span class="line">plt.subplot(<span class="number">212</span>)</span><br><span class="line">plt.contourf(t, frequencies, <span class="built_in">abs</span>(cwtmatr))</span><br><span class="line">plt.ylabel(<span class="string">u&quot;freq(Hz)&quot;</span>)</span><br><span class="line">plt.xlabel(<span class="string">u&quot;time(s)&quot;</span>)</span><br><span class="line">plt.subplots_adjust(hspace=<span class="number">0.4</span>)</span><br><span class="line">plt.show()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;exit&quot;</span>)</span><br></pre></td></tr></table></figure><p><img src="/output_1_0.png" alt="png"></p><pre><code>exit</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;小波变换&lt;/p&gt;</summary>
    
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/tags/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    <category term="期末考试" scheme="https://du2279664786.github.io/tags/%E6%9C%9F%E6%9C%AB%E8%80%83%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>使用Python快速实现图片文字识别</title>
    <link href="https://du2279664786.github.io/posts/8063b4e5.html"/>
    <id>https://du2279664786.github.io/posts/8063b4e5.html</id>
    <published>2022-12-21T14:55:10.000Z</published>
    <updated>2022-12-21T07:23:55.560Z</updated>
    
    <content type="html"><![CDATA[<p>使用Python快速实现图片文字识别</p><span id="more"></span><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">ocr</span>(<span class="params">img_path: <span class="built_in">str</span></span>) -&gt; <span class="built_in">list</span>:</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    根据图片路径，将图片转为文字，返回识别到的字符串列表</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="comment"># 请求头</span></span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&#x27;Host&#x27;</span>: <span class="string">&#x27;cloud.baidu.com&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.114 Safari/537.36 Edg/89.0.774.76&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Accept&#x27;</span>: <span class="string">&#x27;*/*&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Origin&#x27;</span>: <span class="string">&#x27;https://cloud.baidu.com&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Sec-Fetch-Site&#x27;</span>: <span class="string">&#x27;same-origin&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Sec-Fetch-Mode&#x27;</span>: <span class="string">&#x27;cors&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Sec-Fetch-Dest&#x27;</span>: <span class="string">&#x27;empty&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Referer&#x27;</span>: <span class="string">&#x27;https://cloud.baidu.com/product/ocr/general&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Accept-Language&#x27;</span>: <span class="string">&#x27;zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"># 打开图片并对其使用 base64 编码</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(img_path, <span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        img = base64.b64encode(f.read())</span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">&#x27;image&#x27;</span>: <span class="string">&#x27;data:image/jpeg;base64,&#x27;</span>+<span class="built_in">str</span>(img)[<span class="number">2</span>:-<span class="number">1</span>],</span><br><span class="line">        <span class="string">&#x27;image_url&#x27;</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;type&#x27;</span>: <span class="string">&#x27;https://aip.baidubce.com/rest/2.0/ocr/v1/general_basic&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;detect_direction&#x27;</span>: <span class="string">&#x27;false&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"># 开始调用 ocr 的 api</span></span><br><span class="line">    response = requests.post(</span><br><span class="line">        <span class="string">&#x27;https://cloud.baidu.com/aidemo&#x27;</span>, headers=headers, data=data)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 设置一个空的列表，后面用来存储识别到的字符串</span></span><br><span class="line">    ocr_text = []</span><br><span class="line">    result = response.json()[<span class="string">&#x27;data&#x27;</span>]</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> result.get(<span class="string">&#x27;words_result&#x27;</span>):</span><br><span class="line">        <span class="keyword">return</span> []</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 将识别的字符串添加到列表里面</span></span><br><span class="line">    <span class="keyword">for</span> r <span class="keyword">in</span> result[<span class="string">&#x27;words_result&#x27;</span>]:</span><br><span class="line">        text = r[<span class="string">&#x27;words&#x27;</span>].strip()</span><br><span class="line">        ocr_text.append(text)</span><br><span class="line">    <span class="comment"># 返回字符串列表</span></span><br><span class="line">    <span class="keyword">return</span> ocr_text</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">img_path 里面填图片路径,这里分两种情况讨论:</span></span><br><span class="line"><span class="string">第一种:假设你的代码跟图片是在同一个文件夹，那么只需要填文件名,例如 test1.jpg (test1.jpg 是图片文件名)</span></span><br><span class="line"><span class="string">第二种:假设你的图片全路径是 D:/img/test1.jpg ,那么你需要填 D:/img/test1.jpg</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line">img_path = <span class="string">&#x27;1.png&#x27;</span></span><br><span class="line"><span class="comment"># content 是识别后得到的结果</span></span><br><span class="line">content = <span class="string">&quot;&quot;</span>.join(ocr(img_path))</span><br><span class="line"><span class="comment"># 输出结果</span></span><br><span class="line"><span class="built_in">print</span>(content)</span><br></pre></td></tr></table></figure><pre><code>《E.T.外星人》（英语：E.T.the ExtraTerrestria)是1982年美国科幻电影，由史蒂文·斯皮尔伯格执导并与凯瑟琳·肯尼迪起担任制片人，梅丽莎·马西森编剧，亨利·托马斯、迪·沃伦斯、罗伯特·麦克纳夫顿(Robert MacNaughton)、德鲁·巴里摩尔和彼德·考约特主演。讲述了名叫埃利奥特的内向男孩与被困在地球的善良外星人成为朋友的故事。埃利奥特给外星人起名叫“ET”(英文“extraterrestrial”的简称，意为外星人)，他与自己的哥哥和妹妹联合起来帮助外星人找到回家的路，并且还要避免被母亲及政府发现。</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;使用Python快速实现图片文字识别&lt;/p&gt;</summary>
    
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/tags/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    <category term="期末考试" scheme="https://du2279664786.github.io/tags/%E6%9C%9F%E6%9C%AB%E8%80%83%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>水平翻转</title>
    <link href="https://du2279664786.github.io/posts/d631aaf8.html"/>
    <id>https://du2279664786.github.io/posts/d631aaf8.html</id>
    <published>2022-12-21T14:55:10.000Z</published>
    <updated>2022-12-21T07:29:56.463Z</updated>
    
    <content type="html"><![CDATA[<p>水平翻转</p><span id="more"></span><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#   扩充：  水平翻转</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"> </span><br><span class="line">img = cv2.imread(<span class="string">&#x27;cat.jpg&#x27;</span>)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bgr2rbg</span>(<span class="params">img</span>):</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        将颜色空间从BGR转换为RBG</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> img[:,:,::-<span class="number">1</span>]</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 水平翻转</span></span><br><span class="line">flip_h = cv2.flip(img, <span class="number">1</span>)</span><br><span class="line"><span class="comment"># 垂直翻转</span></span><br><span class="line">flip_v = cv2.flip(img, <span class="number">0</span>)</span><br><span class="line"><span class="comment"># 同时水平翻转与垂直翻转</span></span><br><span class="line">flip_hv = cv2.flip(img, -<span class="number">1</span>)</span><br><span class="line"> </span><br><span class="line">plt.subplot(<span class="number">221</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;SRC&#x27;</span>)</span><br><span class="line">plt.imshow(bgr2rbg(img))</span><br><span class="line"> </span><br><span class="line">plt.subplot(<span class="number">222</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Horizontally&#x27;</span>)</span><br><span class="line">plt.imshow(bgr2rbg(flip_h))</span><br><span class="line"> </span><br><span class="line">plt.subplot(<span class="number">223</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Vertically&#x27;</span>)</span><br><span class="line">plt.imshow(bgr2rbg(flip_v))</span><br><span class="line"> </span><br><span class="line">plt.subplot(<span class="number">224</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Horizontally &amp; Vertically&#x27;</span>)</span><br><span class="line">plt.imshow(bgr2rbg(flip_hv))</span><br><span class="line"> </span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#   使用numpy的索引进行图像反转</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"> </span><br><span class="line">img = cv2.imread(<span class="string">&#x27;cat.jpg&#x27;</span>)</span><br><span class="line">height,width,channel = img.shape</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 水平翻转</span></span><br><span class="line">flip_h =  img[:,::-<span class="number">1</span>]</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 垂直翻转</span></span><br><span class="line">flip_v =  img[::-<span class="number">1</span>]</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 水平垂直同时翻转</span></span><br><span class="line">flip_hv =  img[::-<span class="number">1</span>, ::-<span class="number">1</span>]</span><br><span class="line"> </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bgr2rbg</span>(<span class="params">img</span>):</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        将颜色空间从BGR转换为RBG</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> img[:,:,::-<span class="number">1</span>]</span><br><span class="line"> </span><br><span class="line">plt.subplot(<span class="number">221</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;SRC&#x27;</span>)</span><br><span class="line">plt.imshow(bgr2rbg(img))</span><br><span class="line"> </span><br><span class="line">plt.subplot(<span class="number">222</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Horizontally&#x27;</span>)</span><br><span class="line">plt.imshow(bgr2rbg(flip_h))</span><br><span class="line"> </span><br><span class="line">plt.subplot(<span class="number">223</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Vertically&#x27;</span>)</span><br><span class="line">plt.imshow(bgr2rbg(flip_v))</span><br><span class="line"> </span><br><span class="line">plt.subplot(<span class="number">224</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Horizontally &amp; Vertically&#x27;</span>)</span><br><span class="line">plt.imshow(bgr2rbg(flip_hv))</span><br><span class="line"> </span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;水平翻转&lt;/p&gt;</summary>
    
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/tags/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    <category term="期末考试" scheme="https://du2279664786.github.io/tags/%E6%9C%9F%E6%9C%AB%E8%80%83%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>直方图均衡化python实现暗通道去雾算法的示例</title>
    <link href="https://du2279664786.github.io/posts/bdb10fc5.html"/>
    <id>https://du2279664786.github.io/posts/bdb10fc5.html</id>
    <published>2022-12-21T14:55:10.000Z</published>
    <updated>2022-12-21T07:31:01.975Z</updated>
    
    <content type="html"><![CDATA[<p>直方图均衡化python实现暗通道去雾算法的示例</p><span id="more"></span><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 直方图均衡化</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">equalHist_demo</span>(<span class="params">image</span>):</span><br><span class="line">    gray = cv.cvtColor(image,cv.COLOR_BGR2GRAY)</span><br><span class="line">    <span class="comment"># 全局直方图均衡化，用于增强图像对比度，即黑的更黑，白的更白</span></span><br><span class="line">    dst = cv.equalizeHist(gray)</span><br><span class="line">    cv.imshow(<span class="string">&quot;equalHist_demo&quot;</span>, dst)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#  python实现暗通道去雾算法的示例</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">zmMinFilterGray</span>(<span class="params">src, r=<span class="number">7</span></span>):</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;最小值滤波，r是滤波器半径&#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;if r &lt;= 0:</span></span><br><span class="line"><span class="string">      return src</span></span><br><span class="line"><span class="string">    h, w = src.shape[:2]</span></span><br><span class="line"><span class="string">    I = src</span></span><br><span class="line"><span class="string">    res = np.minimum(I , I[[0]+range(h-1) , :])</span></span><br><span class="line"><span class="string">    res = np.minimum(res, I[range(1,h)+[h-1], :])</span></span><br><span class="line"><span class="string">    I = res</span></span><br><span class="line"><span class="string">    res = np.minimum(I , I[:, [0]+range(w-1)])</span></span><br><span class="line"><span class="string">    res = np.minimum(res, I[:, range(1,w)+[w-1]])</span></span><br><span class="line"><span class="string">    return zmMinFilterGray(res, r-1)&#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> cv2.erode(src, np.ones((<span class="number">2</span> * r + <span class="number">1</span>, <span class="number">2</span> * r + <span class="number">1</span>)))  <span class="comment"># 使用opencv的erode函数更高效</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">guidedfilter</span>(<span class="params">I, p, r, eps</span>):</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;引导滤波，直接参考网上的matlab代码&#x27;&#x27;&#x27;</span></span><br><span class="line">    height, width = I.shape</span><br><span class="line">    m_I = cv2.boxFilter(I, -<span class="number">1</span>, (r, r))</span><br><span class="line">    m_p = cv2.boxFilter(p, -<span class="number">1</span>, (r, r))</span><br><span class="line">    m_Ip = cv2.boxFilter(I * p, -<span class="number">1</span>, (r, r))</span><br><span class="line">    cov_Ip = m_Ip - m_I * m_p</span><br><span class="line"></span><br><span class="line">    m_II = cv2.boxFilter(I * I, -<span class="number">1</span>, (r, r))</span><br><span class="line">    var_I = m_II - m_I * m_I</span><br><span class="line"></span><br><span class="line">    a = cov_Ip / (var_I + eps)</span><br><span class="line">    b = m_p - a * m_I</span><br><span class="line"></span><br><span class="line">    m_a = cv2.boxFilter(a, -<span class="number">1</span>, (r, r))</span><br><span class="line">    m_b = cv2.boxFilter(b, -<span class="number">1</span>, (r, r))</span><br><span class="line">    <span class="keyword">return</span> m_a * I + m_b</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getV1</span>(<span class="params">m, r, eps, w, maxV1</span>):  <span class="comment"># 输入rgb图像，值范围[0,1]</span></span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;计算大气遮罩图像V1和光照值A, V1 = 1-t/A&#x27;&#x27;&#x27;</span></span><br><span class="line">    V1 = np.<span class="built_in">min</span>(m, <span class="number">2</span>)  <span class="comment"># 得到暗通道图像</span></span><br><span class="line">    V1 = guidedfilter(V1, zmMinFilterGray(V1, <span class="number">7</span>), r, eps)  <span class="comment"># 使用引导滤波优化</span></span><br><span class="line">    bins = <span class="number">2000</span></span><br><span class="line">    ht = np.histogram(V1, bins)  <span class="comment"># 计算大气光照A</span></span><br><span class="line">    d = np.cumsum(ht[<span class="number">0</span>]) / <span class="built_in">float</span>(V1.size)</span><br><span class="line">    <span class="keyword">for</span> lmax <span class="keyword">in</span> <span class="built_in">range</span>(bins - <span class="number">1</span>, <span class="number">0</span>, -<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">if</span> d[lmax] &lt;= <span class="number">0.999</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    A = np.mean(m, <span class="number">2</span>)[V1 &gt;= ht[<span class="number">1</span>][lmax]].<span class="built_in">max</span>()</span><br><span class="line"></span><br><span class="line">    V1 = np.minimum(V1 * w, maxV1)  <span class="comment"># 对值范围进行限制</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> V1, A</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">deHaze</span>(<span class="params">m, r=<span class="number">81</span>, eps=<span class="number">0.001</span>, w=<span class="number">0.95</span>, maxV1=<span class="number">0.80</span>, bGamma=<span class="literal">False</span></span>):</span><br><span class="line">    Y = np.zeros(m.shape)</span><br><span class="line">    V1, A = getV1(m, r, eps, w, maxV1)  <span class="comment"># 得到遮罩图像和大气光照</span></span><br><span class="line">    <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">        Y[:, :, k] = (m[:, :, k] - V1) / (<span class="number">1</span> - V1 / A)  <span class="comment"># 颜色校正</span></span><br><span class="line">    Y = np.clip(Y, <span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">if</span> bGamma:</span><br><span class="line">        Y = Y ** (np.log(<span class="number">0.5</span>) / np.log(Y.mean()))  <span class="comment"># gamma校正,默认不进行该操作</span></span><br><span class="line">    <span class="keyword">return</span> Y</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    m = deHaze(cv2.imread(<span class="string">&#x27;E:/apple.jpg&#x27;</span>) / <span class="number">255.0</span>) * <span class="number">255</span></span><br><span class="line">    cv2.imwrite(<span class="string">&#x27;E:/defog.jpg&#x27;</span>, m)</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;直方图均衡化python实现暗通道去雾算法的示例&lt;/p&gt;</summary>
    
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/tags/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    <category term="期末考试" scheme="https://du2279664786.github.io/tags/%E6%9C%9F%E6%9C%AB%E8%80%83%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>腐蚀与膨胀</title>
    <link href="https://du2279664786.github.io/posts/38130560.html"/>
    <id>https://du2279664786.github.io/posts/38130560.html</id>
    <published>2022-12-21T14:55:10.000Z</published>
    <updated>2022-12-21T07:32:52.443Z</updated>
    
    <content type="html"><![CDATA[<p>腐蚀与膨胀</p><span id="more"></span><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">腐蚀</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">kernel = np.ones(shape=(<span class="number">5</span>, <span class="number">5</span>))</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">erode_bin_image</span>(<span class="params">bin_image, kernel</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    erode bin image</span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        bin_image: image with 0,1 pixel value</span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        erode image</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    kernel_size = kernel.shape[<span class="number">0</span>]</span><br><span class="line">    bin_image = np.array(bin_image)</span><br><span class="line">    <span class="keyword">if</span> (kernel_size%<span class="number">2</span> == <span class="number">0</span>) <span class="keyword">or</span> kernel_size&lt;<span class="number">1</span>:</span><br><span class="line">        <span class="keyword">raise</span> ValueError(<span class="string">&quot;kernel size must be odd and bigger than 1&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> (bin_image.<span class="built_in">max</span>() != <span class="number">1</span>) <span class="keyword">or</span> (bin_image.<span class="built_in">min</span>() != <span class="number">0</span>):</span><br><span class="line">        <span class="keyword">raise</span> ValueError(<span class="string">&quot;input image&#x27;s pixel value must be 0 or 1&quot;</span>)</span><br><span class="line">    d_image = np.zeros(shape=bin_image.shape)</span><br><span class="line">    center_move = <span class="built_in">int</span>((kernel_size-<span class="number">1</span>)/<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(center_move, bin_image.shape[<span class="number">0</span>]-kernel_size+<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(cen ter_move, bin_image.shape[<span class="number">1</span>]-kernel_size+<span class="number">1</span>):</span><br><span class="line">            d_image[i, j] = np.<span class="built_in">min</span>(bin_image[i-center_move:i+center_move,</span><br><span class="line">                                             j-center_move:j+center_move])</span><br><span class="line">    <span class="keyword">return</span> d_image</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">上述代码实现的就是卷积操作，其中第一个<span class="keyword">if</span>语句用来判断卷积核尺寸是不是奇数并且正整数，</span><br><span class="line">第二个<span class="keyword">if</span>用来判断输入图像是不是灰度图像，如果不满足这两者就会抛出Error。</span><br><span class="line">接下来的双层循环是模板在图像以步长为<span class="number">1</span>进行移动，并选取最小值过程。</span><br><span class="line">用来调用函数并绘图的代码如下：</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">e_image = erode_bin_image(bin_image, kernel)</span><br><span class="line">plot_image = [bin_image, e_image]</span><br><span class="line">plot_title = [<span class="string">&quot;original image&quot;</span>, <span class="string">&quot;erode image&quot;</span>]</span><br><span class="line">plt.figure()</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="built_in">len</span>(plot_image)+<span class="number">1</span>):</span><br><span class="line">    plt.subplot(<span class="number">1</span>, <span class="built_in">len</span>(plot_image), i)</span><br><span class="line">    plt.imshow(plot_image[i-<span class="number">1</span>], cmap=<span class="string">&quot;gray&quot;</span>)</span><br><span class="line">    plt.title(plot_title[i-<span class="number">1</span>])</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">膨胀</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">kernel = np.ones(shape=(<span class="number">13</span>, <span class="number">13</span>))</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">dilate_bin_image</span>(<span class="params">bin_image, kernel</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    dilate bin image</span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        bin_image: image with 0,1 pixel value</span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        dilate image</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    kernel_size = kernel.shape[<span class="number">0</span>]</span><br><span class="line">    bin_image = np.array(bin_image)</span><br><span class="line">    <span class="keyword">if</span> (kernel_size%<span class="number">2</span> == <span class="number">0</span>) <span class="keyword">or</span> kernel_size&lt;<span class="number">1</span>:</span><br><span class="line">        <span class="keyword">raise</span> ValueError(<span class="string">&quot;kernel size must be odd and bigger than 1&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> (bin_image.<span class="built_in">max</span>() != <span class="number">1</span>) <span class="keyword">or</span> (bin_image.<span class="built_in">min</span>() != <span class="number">0</span>):</span><br><span class="line">        <span class="keyword">raise</span> ValueError(<span class="string">&quot;input image&#x27;s pixel value must be 0 or 1&quot;</span>)</span><br><span class="line">    d_image = np.zeros(shape=bin_image.shape)</span><br><span class="line">    center_move = <span class="built_in">int</span>((kernel_size-<span class="number">1</span>)/<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(center_move, bin_image.shape[<span class="number">0</span>]-kernel_size+<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(center_move, bin_image.shape[<span class="number">1</span>]-kernel_size+<span class="number">1</span>):</span><br><span class="line">            d_image[i, j] = np.<span class="built_in">max</span>(bin_image[i-center_move:i+center_move,j-center_move:j+center_move])</span><br><span class="line">    <span class="keyword">return</span> d_image</span><br><span class="line">d_image = dilate_bin_image(bin_image, kernel)</span><br><span class="line">plot_image = [bin_image, d_image]</span><br><span class="line">plot_title = [<span class="string">&quot;original image&quot;</span>, <span class="string">&quot;dilate image&quot;</span>]</span><br><span class="line">plt.figure()</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="built_in">len</span>(plot_image)+<span class="number">1</span>):</span><br><span class="line">    plt.subplot(<span class="number">1</span>, <span class="built_in">len</span>(plot_image), i)</span><br><span class="line">    plt.imshow(plot_image[i-<span class="number">1</span>], cmap=<span class="string">&quot;gray&quot;</span>)</span><br><span class="line">    plt.title(plot_title[i-<span class="number">1</span>])</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;腐蚀与膨胀&lt;/p&gt;</summary>
    
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/tags/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    <category term="期末考试" scheme="https://du2279664786.github.io/tags/%E6%9C%9F%E6%9C%AB%E8%80%83%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>调取本地摄像头拍照</title>
    <link href="https://du2279664786.github.io/posts/9664de52.html"/>
    <id>https://du2279664786.github.io/posts/9664de52.html</id>
    <published>2022-12-21T14:55:10.000Z</published>
    <updated>2022-12-21T07:24:04.318Z</updated>
    
    <content type="html"><![CDATA[<p>调取本地摄像头拍照</p><span id="more"></span><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#-------------------------------------#</span></span><br><span class="line"><span class="comment">#   调用摄像头或者视频进行检测</span></span><br><span class="line"><span class="comment">#   调用摄像头直接运行即可</span></span><br><span class="line"><span class="comment">#   调用视频可以将cv2.VideoCapture()指定路径</span></span><br><span class="line"><span class="comment">#   视频的保存并不难，可以百度一下看看</span></span><br><span class="line"><span class="comment">#-------------------------------------#</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> yolo <span class="keyword">import</span> YOLO</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> GrabImage <span class="keyword">import</span>*</span><br><span class="line"></span><br><span class="line">yolo = YOLO()</span><br><span class="line"><span class="comment">#-------------------------------------#</span></span><br><span class="line"><span class="comment">#   调用摄像头</span></span><br><span class="line"><span class="comment">#   capture=cv2.VideoCapture(&quot;1.mp4&quot;)</span></span><br><span class="line"><span class="comment">#-------------------------------------#</span></span><br><span class="line">capture=cv2.VideoCapture(<span class="number">0</span>)</span><br><span class="line">fps = <span class="number">0.0</span></span><br><span class="line"><span class="keyword">while</span>(<span class="literal">True</span>):</span><br><span class="line">    t1 = time.time()</span><br><span class="line">    <span class="comment"># 读取某一帧</span></span><br><span class="line">    ref,frame=capture.read()</span><br><span class="line">    <span class="comment"># 格式转变，BGRtoRGB</span></span><br><span class="line">    frame = cv2.cvtColor(frame,cv2.COLOR_BGR2RGB)</span><br><span class="line">    <span class="comment"># 转变成Imag</span></span><br><span class="line">    frame = Image.fromarray(np.uint8(frame))</span><br><span class="line">    <span class="comment"># 进行检测</span></span><br><span class="line">    frame = np.array(yolo.detect_image(frame))</span><br><span class="line">    <span class="comment"># RGBtoBGR满足opencv显示格式</span></span><br><span class="line">    frame = cv2.cvtColor(frame,cv2.COLOR_RGB2BGR)</span><br><span class="line"></span><br><span class="line">    fps  = ( fps + (<span class="number">1.</span>/(time.time()-t1)) ) / <span class="number">2</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;fps= %.2f&quot;</span>%(fps))</span><br><span class="line">    <span class="built_in">print</span>(np.shape(frame))</span><br><span class="line">    frame = cv2.putText(frame, <span class="string">&quot;fps= %.2f&quot;</span>%(fps), (<span class="number">0</span>, <span class="number">40</span>), cv2.FONT_HERSHEY_SIMPLEX, <span class="number">1</span>, (<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">    cv2.imshow(<span class="string">&quot;video&quot;</span>,frame)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    c= cv2.waitKey(<span class="number">1</span>) &amp; <span class="number">0xff</span> </span><br><span class="line">    <span class="keyword">if</span> c==<span class="number">27</span>:</span><br><span class="line">        capture.release()</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;调取本地摄像头拍照&lt;/p&gt;</summary>
    
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/tags/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    <category term="期末考试" scheme="https://du2279664786.github.io/tags/%E6%9C%9F%E6%9C%AB%E8%80%83%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>高斯滤波</title>
    <link href="https://du2279664786.github.io/posts/80b530f2.html"/>
    <id>https://du2279664786.github.io/posts/80b530f2.html</id>
    <published>2022-12-21T14:55:10.000Z</published>
    <updated>2022-12-21T07:38:07.345Z</updated>
    
    <content type="html"><![CDATA[<p>高斯滤波</p><span id="more"></span><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#encoding:utf-8</span></span><br><span class="line"><span class="keyword">import</span> cv2  </span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np  </span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment">#读取图片</span></span><br><span class="line">img = cv2.imread(<span class="string">&#x27;test01.png&#x27;</span>)</span><br><span class="line">source = cv2.cvtColor(img,cv2.COLOR_BGR2RGB)</span><br><span class="line"></span><br><span class="line"><span class="comment">#高斯滤波</span></span><br><span class="line">result = cv2.GaussianBlur(source, (<span class="number">3</span>,<span class="number">3</span>), <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#显示图形</span></span><br><span class="line">titles = [<span class="string">&#x27;Source Image&#x27;</span>, <span class="string">&#x27;GaussianBlur Image&#x27;</span>]  </span><br><span class="line">images = [source, result]  </span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> xrange(<span class="number">2</span>):  </span><br><span class="line">   plt.subplot(<span class="number">1</span>,<span class="number">2</span>,i+<span class="number">1</span>), plt.imshow(images[i], <span class="string">&#x27;gray&#x27;</span>)  </span><br><span class="line">   plt.title(titles[i])  </span><br><span class="line">   plt.xticks([]),plt.yticks([])  </span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;高斯滤波&lt;/p&gt;</summary>
    
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/tags/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    <category term="期末考试" scheme="https://du2279664786.github.io/tags/%E6%9C%9F%E6%9C%AB%E8%80%83%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>调取电脑摄像机摄像头</title>
    <link href="https://du2279664786.github.io/posts/eaeaaae1.html"/>
    <id>https://du2279664786.github.io/posts/eaeaaae1.html</id>
    <published>2022-12-21T14:55:10.000Z</published>
    <updated>2022-12-21T07:35:48.682Z</updated>
    
    <content type="html"><![CDATA[<p>调取电脑摄像机</p><span id="more"></span><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line">cap = cv2.VideoCapture(<span class="number">0</span>)</span><br><span class="line">f, frame = cap.read() <span class="comment">#此刻拍照</span></span><br><span class="line">cv2.imwrite(<span class="string">&quot;example.png&quot;</span>, frame) <span class="comment"># 将拍摄内容保存为png图片</span></span><br><span class="line">cap.release() <span class="comment"># 关闭调用的摄像头</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##  此外，还可以将照片的颜色去掉，变成黑白照片。</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;调取电脑摄像机&lt;/p&gt;</summary>
    
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/tags/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    <category term="期末考试" scheme="https://du2279664786.github.io/tags/%E6%9C%9F%E6%9C%AB%E8%80%83%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>边缘与图像处理</title>
    <link href="https://du2279664786.github.io/posts/6d097016.html"/>
    <id>https://du2279664786.github.io/posts/6d097016.html</id>
    <published>2022-12-21T14:55:10.000Z</published>
    <updated>2022-12-21T07:36:32.000Z</updated>
    
    <content type="html"><![CDATA[<p>边缘与图像处理</p><span id="more"></span><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> skimage <span class="keyword">import</span> measure,draw </span><br><span class="line"></span><br><span class="line"><span class="comment">#生成二值测试图像</span></span><br><span class="line">img=np.zeros([<span class="number">100</span>,<span class="number">100</span>])</span><br><span class="line">img[<span class="number">20</span>:<span class="number">40</span>,<span class="number">60</span>:<span class="number">80</span>]=<span class="number">1</span>  <span class="comment">#矩形</span></span><br><span class="line">rr,cc=draw.circle(<span class="number">60</span>,<span class="number">60</span>,<span class="number">10</span>)  <span class="comment">#小圆</span></span><br><span class="line">rr1,cc1=draw.circle(<span class="number">20</span>,<span class="number">30</span>,<span class="number">15</span>) <span class="comment">#大圆</span></span><br><span class="line">img[rr,cc]=<span class="number">1</span></span><br><span class="line">img[rr1,cc1]=<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#检测所有图形的轮廓</span></span><br><span class="line">contours = measure.find_contours(img, <span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#绘制轮廓</span></span><br><span class="line">fig, (ax0,ax1) = plt.subplots(<span class="number">1</span>,<span class="number">2</span>,figsize=(<span class="number">8</span>,<span class="number">8</span>))</span><br><span class="line">ax0.imshow(img,plt.cm.gray)</span><br><span class="line">ax1.imshow(img,plt.cm.gray)</span><br><span class="line"><span class="keyword">for</span> n, contour <span class="keyword">in</span> <span class="built_in">enumerate</span>(contours):</span><br><span class="line">    ax1.plot(contour[:, <span class="number">1</span>], contour[:, <span class="number">0</span>], linewidth=<span class="number">2</span>)</span><br><span class="line">ax1.axis(<span class="string">&#x27;image&#x27;</span>)</span><br><span class="line">ax1.set_xticks([])</span><br><span class="line">ax1.set_yticks([])</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="/output_1_0.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> skimage <span class="keyword">import</span> measure,data,color</span><br><span class="line"></span><br><span class="line"><span class="comment">#生成二值测试图像</span></span><br><span class="line">img=color.rgb2gray(data.horse())</span><br><span class="line"></span><br><span class="line"><span class="comment">#检测所有图形的轮廓</span></span><br><span class="line">contours = measure.find_contours(img, <span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#绘制轮廓</span></span><br><span class="line">fig, axes = plt.subplots(<span class="number">1</span>,<span class="number">2</span>,figsize=(<span class="number">8</span>,<span class="number">8</span>))</span><br><span class="line">ax0, ax1= axes.ravel()</span><br><span class="line">ax0.imshow(img,plt.cm.gray)</span><br><span class="line">ax0.set_title(<span class="string">&#x27;original image&#x27;</span>)</span><br><span class="line"></span><br><span class="line">rows,cols=img.shape</span><br><span class="line">ax1.axis([<span class="number">0</span>,rows,cols,<span class="number">0</span>])</span><br><span class="line"><span class="keyword">for</span> n, contour <span class="keyword">in</span> <span class="built_in">enumerate</span>(contours):</span><br><span class="line">    ax1.plot(contour[:, <span class="number">1</span>], contour[:, <span class="number">0</span>], linewidth=<span class="number">2</span>)</span><br><span class="line">ax1.axis(<span class="string">&#x27;image&#x27;</span>)</span><br><span class="line">ax1.set_title(<span class="string">&#x27;contours&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="/output_2_0.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> skimage <span class="keyword">import</span> measure,data,color</span><br><span class="line"></span><br><span class="line"><span class="comment">#生成二值测试图像</span></span><br><span class="line">hand = np.array([[<span class="number">1.64516129</span>, <span class="number">1.16145833</span>],</span><br><span class="line">                 [<span class="number">1.64516129</span>, <span class="number">1.59375</span>],</span><br><span class="line">                 [<span class="number">1.35080645</span>, <span class="number">1.921875</span>],</span><br><span class="line">                 [<span class="number">1.375</span>, <span class="number">2.18229167</span>],</span><br><span class="line">                 [<span class="number">1.68548387</span>, <span class="number">1.9375</span>],</span><br><span class="line">                 [<span class="number">1.60887097</span>, <span class="number">2.55208333</span>],</span><br><span class="line">                 [<span class="number">1.68548387</span>, <span class="number">2.69791667</span>],</span><br><span class="line">                 [<span class="number">1.76209677</span>, <span class="number">2.56770833</span>],</span><br><span class="line">                 [<span class="number">1.83064516</span>, <span class="number">1.97395833</span>],</span><br><span class="line">                 [<span class="number">1.89516129</span>, <span class="number">2.75</span>],</span><br><span class="line">                 [<span class="number">1.9516129</span>, <span class="number">2.84895833</span>],</span><br><span class="line">                 [<span class="number">2.01209677</span>, <span class="number">2.76041667</span>],</span><br><span class="line">                 [<span class="number">1.99193548</span>, <span class="number">1.99479167</span>],</span><br><span class="line">                 [<span class="number">2.11290323</span>, <span class="number">2.63020833</span>],</span><br><span class="line">                 [<span class="number">2.2016129</span>, <span class="number">2.734375</span>],</span><br><span class="line">                 [<span class="number">2.25403226</span>, <span class="number">2.60416667</span>],</span><br><span class="line">                 [<span class="number">2.14919355</span>, <span class="number">1.953125</span>],</span><br><span class="line">                 [<span class="number">2.30645161</span>, <span class="number">2.36979167</span>],</span><br><span class="line">                 [<span class="number">2.39112903</span>, <span class="number">2.36979167</span>],</span><br><span class="line">                 [<span class="number">2.41532258</span>, <span class="number">2.1875</span>],</span><br><span class="line">                 [<span class="number">2.1733871</span>, <span class="number">1.703125</span>],</span><br><span class="line">                 [<span class="number">2.07782258</span>, <span class="number">1.16666667</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment">#检测所有图形的轮廓</span></span><br><span class="line">new_hand = hand.copy()</span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">    new_hand =measure.subdivide_polygon(new_hand, degree=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># approximate subdivided polygon with Douglas-Peucker algorithm</span></span><br><span class="line">appr_hand =measure.approximate_polygon(new_hand, tolerance=<span class="number">0.02</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Number of coordinates:&quot;</span>, <span class="built_in">len</span>(hand), <span class="built_in">len</span>(new_hand), <span class="built_in">len</span>(appr_hand))</span><br><span class="line"></span><br><span class="line">fig, axes= plt.subplots(<span class="number">2</span>,<span class="number">2</span>, figsize=(<span class="number">9</span>, <span class="number">8</span>))</span><br><span class="line">ax0,ax1,ax2,ax3=axes.ravel()</span><br><span class="line"></span><br><span class="line">ax0.plot(hand[:, <span class="number">0</span>], hand[:, <span class="number">1</span>],<span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">ax0.set_title(<span class="string">&#x27;original hand&#x27;</span>)</span><br><span class="line">ax1.plot(new_hand[:, <span class="number">0</span>], new_hand[:, <span class="number">1</span>],<span class="string">&#x27;g&#x27;</span>)</span><br><span class="line">ax1.set_title(<span class="string">&#x27;subdivide_polygon&#x27;</span>)</span><br><span class="line">ax2.plot(appr_hand[:, <span class="number">0</span>], appr_hand[:, <span class="number">1</span>],<span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">ax2.set_title(<span class="string">&#x27;approximate_polygon&#x27;</span>)</span><br><span class="line"></span><br><span class="line">ax3.plot(hand[:, <span class="number">0</span>], hand[:, <span class="number">1</span>],<span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">ax3.plot(new_hand[:, <span class="number">0</span>], new_hand[:, <span class="number">1</span>],<span class="string">&#x27;g&#x27;</span>)</span><br><span class="line">ax3.plot(appr_hand[:, <span class="number">0</span>], appr_hand[:, <span class="number">1</span>],<span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">ax3.set_title(<span class="string">&#x27;all&#x27;</span>)</span><br></pre></td></tr></table></figure><pre><code>Number of coordinates: 22 642 26Text(0.5, 1.0, &#39;all&#39;)</code></pre><p><img src="/output_3_2.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;边缘与图像处理&lt;/p&gt;</summary>
    
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/tags/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    <category term="期末考试" scheme="https://du2279664786.github.io/tags/%E6%9C%9F%E6%9C%AB%E8%80%83%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>第三章 目标提取</title>
    <link href="https://du2279664786.github.io/posts/1fc2945f.html"/>
    <id>https://du2279664786.github.io/posts/1fc2945f.html</id>
    <published>2022-12-15T14:55:10.000Z</published>
    <updated>2022-12-15T12:51:23.274Z</updated>
    
    <content type="html"><![CDATA[<p>第三章 目标提取</p><span id="more"></span><h1 id="第三章-目标提取"><a href="#第三章-目标提取" class="headerlink" title="第三章 目标提取"></a>第三章 目标提取</h1><h2 id="1-如何提取目标物体"><a href="#1-如何提取目标物体" class="headerlink" title="1.如何提取目标物体"></a>1.如何提取目标物体</h2><pre><code>     判断目标为何物或者测量其尺寸大小的第一步是将目标从复杂的图像中提取出来。</code></pre><p>•在街景中只提取人；<br>• 在智能交通系统中识别车辆牌照和交通标志；<br>• 从邮件中查找邮政编码来进行分类；<br>• 使用监控摄像机，当发现有贸然进入的人时，发送警报；<br>• 在流动的生产线上提取零件；<br>• 判别农作物果实的大小，依据其大小进行分类等。<br>        人眼在杂乱的图像中搜寻目标物体时，主要依靠颜色和形状差别，具体过程人们在无意识中完成，其实利用了人们常年生活积累的常识。<br>        同样道理，机器视觉在提取物体时，也是依靠颜色和形状差别，只不过电脑里没有这些知识积累，需要人们利用计算机语言（程序）通过某种方法将目标物体知识输入或计算出来，形成判断依据。<br>         以下分别介绍利用形状和颜色进行目标物提取的方法。</p><h2 id="2-基于阈值的目标提取"><a href="#2-基于阈值的目标提取" class="headerlink" title="2.基于阈值的目标提取"></a>2.基于阈值的目标提取</h2><h3 id="2-1二值化处理"><a href="#2-1二值化处理" class="headerlink" title="2.1二值化处理"></a>2.1二值化处理</h3><pre><code>     二值化处理（binarization）是把目标物从图像中提取出来的一种方法。二值化处理的方法有很多，最简单的一种叫做阈值处理（thresholding），就是对于输入图像的各像素，当其灰度值在某设定值（称为阈值，threshold）以上或以下，赋予对应的输出图像的像素为白色（255）或黑色（0）。</code></pre><p><img src="https://img-blog.csdnimg.cn/ae15789517f34a4ea5e126a45fd1e85a.png" alt="在这里插入图片描述"><br>其中f（x，y）、g（x，y）分别是处理前和处理后的图像在（x，y）处像素的灰度值，t是阈值。<br>根据图像情况，有时需要提取两个阈值之间的部分，如式（3.3）所示。这种方法称为双阈值二值化处理。<br><img src="https://img-blog.csdnimg.cn/a4f04091487d45709e6071527e483bd7.png" alt="在这里插入图片描述"></p><h3 id="2-2阈值的确定"><a href="#2-2阈值的确定" class="headerlink" title="2.2阈值的确定"></a>2.2阈值的确定</h3><pre><code>    灰度图像像素的最大值是255（白色），最小值是0（黑色），从0～255，共有256级，一幅图像上每级有几个像素，把它数出来（计算机程序可以瞬间完成），做个图表，就是直方图。     计算出直方图，是灰度图像目标提取的重要步骤之一。</code></pre><p><img src="https://img-blog.csdnimg.cn/ab5c6d063f0141ffbd5bcb9c6ff8ab45.png" alt="在这里插入图片描述"><br>对于背景单一的图像，一般在直方图上有两个峰值，一个是背景的峰值，一个是目标物的峰值。<br><img src="https://img-blog.csdnimg.cn/9d7d45f466ed4c529f9ef487068b280b.png" alt="在这里插入图片描述"><br>        对这种在直方图上具有明显双峰的图像，把阈值设在双峰之间的凹点，即可较好地提取出目标物。<br>        如果原始图像的直方图凹凸激烈，计算机程序处理时就不好确定波谷的位置。为了比较容易地发现波谷，经常采取在直方图上对邻域点进行平均化处理，以减少直方图的凹凸不平。<br>       直方图就比较容易通过算法编写来找到其波谷位置。像这样取直方图的波谷作为阈值的方法称为模态法。<br><img src="https://img-blog.csdnimg.cn/e757a6414db24f7ca23fbb2d0d8ac8fc.png" alt="在这里插入图片描述"><br>在阈值确定方法中除了模态法以外，还有p参数法（p-tile method）、判别分析法（discriminant analysis method）、可变阈值法（variable thresholding）、大津法（OTSU method）等。<br>        p参数法是当物体占整个图像的比例已知时（如p%），在直方图上，暗灰度（或者亮灰度）一侧起的累计像素数占总像素数p%的地方作为阈值的方法。<br>        判别分析法是当直方图分成物体和背景两部分时，通过分析两部分的统计量来确定阈值的方法。<br>        可变阈值法在背景灰度多变的情况下使用，对图像的不同部位设置不同的阈值。<br>        大津法在各种图像处理中得到了广泛的应用，下面具体介绍一下大津法。<br>大津法也叫最大类间方差法，是由日本学者大津（OTSU）于1979年提出的。它是按图像的灰度特性，将图像分成背景和目标两部分。背景和目标之间的类间方差越大，说明构成图像的两部分的差别越大。因此，使类间方差最大的分割意味着错分概率最小。</p><h2 id="3-基于颜色的目标提取"><a href="#3-基于颜色的目标提取" class="headerlink" title="3.基于颜色的目标提取"></a>3.基于颜色的目标提取</h2><h3 id="3-1-色相、亮度、饱和度及其他"><a href="#3-1-色相、亮度、饱和度及其他" class="headerlink" title="3.1　色相、亮度、饱和度及其他"></a>3.1　色相、亮度、饱和度及其他</h3><pre><code>    彩色图像是由红（R）、绿（G）、蓝（B）三个分量的灰度图像组成。    当拍摄绿草地时，与R、B分量相比，G分量较强；    对于蓝天来说，与R、G分量相比，B分量较强。    根据R、G、B分量值的不同，人们可以见到各种各样的颜色。在进行彩色图像处理时，不仅要考虑位置和灰度信息，还要考虑彩色信息。    对于同一种颜色，不同的人，脑子里所想的颜色可能不相同。为了定量地表现颜色，可以把颜色分成三个特性来表现，第一个特性是色调或者色相H（hue），用来表示颜色的种类。第二个特性是明度V（value）或者亮度Y（brightness）或I（intensity），用来表示图像的明暗程度。第三个特性是饱和度或彩度S（saturation），用来表示颜色的鲜明程度。    这三个特性被称为颜色的三个基本属性。颜色的这三个基本属性可以用一个理想化的双锥体HSI模型来表示。</code></pre><p>双锥体轴线代表亮度值。垂直于轴线的平面表示色调与饱和度，用极坐标形式表示，即夹角表示色调，径向距离表示在一定色调下的饱和度。<br><img src="https://img-blog.csdnimg.cn/aa1a0358bffd4f428ea96981ca679a7c.png" alt="在这里插入图片描述"><br>         色调的表示是从某基准的颜色开始计算在0°～180°之间旋转多少角度，当与基准颜色相同（色调的旋转角为0°）时为255，相对方向的补色（色调的旋转角为180°）时为0。<br>        中间用254级的灰度表示。在色调的表示中，当饱和度为0（即无颜色信号）时不计算色调，常常给予0灰度级。饱和度的图像是将饱和度的最小值作为像素的最小值0，将饱和度的最大值作为像素的最大值255，依次按比例将饱和度的数据转换为图像数据。<br><img src="https://img-blog.csdnimg.cn/96e5e47d2b814e5c9ad073219d37a837.png" alt="在这里插入图片描述"><br>        对实际图像进行上述变换的结果如图3.7所示，其中图（a）是原始图像，图（b）是其亮度信号的图像。原始图像中宠物兔的红色成分较多，由于色调信号以红色为基准，因此图（c）所示的色调信号图像整体偏亮。由于整个图像的颜色不是很深，所以图（d）的饱和度信号偏暗，特别是背景地板砖的饱和度最低。<br>       可以看出，对于该图像，利用H或者S信号图像，对目标物兔子进行二值化提取，应该更容易一些。因此将RGB转换成HSI有时更有利于目标物的提取，但是与利用RGB信号相比，将会付出多倍的处理时间。<br><img src="https://img-blog.csdnimg.cn/105898d3592c47a3a6d95e159028a5e1.png" alt="在这里插入图片描述"></p><h3 id="3-2颜色分量及其组合处理"><a href="#3-2颜色分量及其组合处理" class="headerlink" title="3.2颜色分量及其组合处理"></a>3.2颜色分量及其组合处理</h3><pre><code>    对于自然界的目标提取，可以根据目标的颜色特征，尽量使用R、G、B分量及它们之间的差分组合，这样可以有效避免自然光变化的影响，快速有效地提取目标。    以下举例说明基于颜色差分的目标提取。  （1）果树上红色桃子的提取    ①原图像。</code></pre><p><img src="https://img-blog.csdnimg.cn/bfabf17d7c3644f0aa077c66198fdfaa.png" alt="在这里插入图片描述"><br>        ②桃子的红色区域提取<br>        由于成熟桃子一般带红色，因此对彩色原图像首先利用红、绿色差信息提取图像中桃子的红色区域，然后再采用与原图进行匹配膨胀的方法来获得桃子的完整区域。<br><img src="https://img-blog.csdnimg.cn/cfbc2a9d491b49d8a02b8116cb3526ac.png" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/768a81d298db4ba8885ecf15e64eee1f.png" alt="在这里插入图片描述"><br>    （2）绿色麦苗的提取<br>        在不同季节小麦苗的颜色有所不同，但是都是呈绿色。如图所示，（a）为11月（秋季）小麦生长初期阴天的图像，土壤比较湿润；（b）为2月（冬季）晴天的图像，土壤干旱，发生干裂；（c）为3月（春季）小麦返青时节阴天的图像，土壤比较松软；（d）～（f）分别为以后不同生长阶段不同天气状况的图像。这6幅图分别代表了小麦的不同生长阶段和不同的天气状况。<br><img src="https://img-blog.csdnimg.cn/a5894247d0164002a6dc0dea9165ab77.png" alt="在这里插入图片描述"><br>由于麦苗的绿色成分大于其他两个颜色成分，为了提取绿色的麦苗，可以通过强调绿色成分、抑制其他成分的方法把麦田彩色图像变化为灰度图像。<br><img src="https://img-blog.csdnimg.cn/6f276031efb6436da0c47b86833e0d55.png" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/8e3f4fb406a64bf3bb5292b7ba48bf17.png" alt="在这里插入图片描述"></p><h3 id="3-3基于差分的目标提取"><a href="#3-3基于差分的目标提取" class="headerlink" title="3.3基于差分的目标提取"></a>3.3基于差分的目标提取</h3><pre><code>    基于差分的目标提取，一般用于运动图像的目标提取，有帧间差分和背景差分两种方式，以下分别利用工程实践项目来说明两种差分目标提取方式。</code></pre><h3 id="3-1帧间差分"><a href="#3-1帧间差分" class="headerlink" title="3.1帧间差分"></a>3.1帧间差分</h3><pre><code>    所谓帧间差分，就是将前帧图像的每个像素值减去后帧图像上对应点的像素值（或者反之），获得的结果如果大于设定阈值，在输出图像上设为白色像素，否则设为黑色像素。</code></pre>]]></content>
    
    
    <summary type="html">&lt;p&gt;第三章 目标提取&lt;/p&gt;</summary>
    
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
    <category term="机器视觉" scheme="https://du2279664786.github.io/tags/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    <category term="期末考试" scheme="https://du2279664786.github.io/tags/%E6%9C%9F%E6%9C%AB%E8%80%83%E8%AF%95/"/>
    
  </entry>
  
</feed>
